//package stefankussmaul.lab1;

import java.util.Scanner;

/**
 * Simple Algorithms Lab for AP Computer Science
 * Written by Stefan Kussmaul September 2015
 */
public class Main {

    private static final Scanner scanner = new Scanner(System.in);
    private static long startTime;
    private static long endTime;

    public static void main(String[] args) {
        System.out.println("Welcome to Simple Algorithms!\n");
        while(true) {
            printMainMenu();
            String user_input = getInput();
            handleInput(user_input);
            System.out.println();
        }
    }

    // returns console input
    private static String getInput() { return scanner.nextLine(); }

    private static void printMainMenu() {
        System.out.print(
                "1. Factorize a Number\n" +
                        "2. Calculate GCD\n" +
                        "3. Check Prime\n" +
                        "4. Calculate Exponent\n" +
                        "5. Find Digit in Number\n" +
                        "6. Print Digits of Number\n" +
                        "7. Count Digits in Number\n" +
                        "8. Exit Program\n"
        );
    }

    // parses user input, handles any errors,
    // and starts specified function
    private static void handleInput(String input) {
        if(input.equals("") || input.isEmpty()) {
            System.out.println("Error: No Function Selected");
        } else {
            try {
                int choice = Integer.parseInt(input);
                if (choice < 1 || choice > 8) {
                    System.out.println("Error: choice must be in range 1 - 8 inclusive\n");
                } else {
                    executeFunction(choice);
                }
            } catch (NumberFormatException e) {
                System.out.println("Error: \"" + input + "\" is not a valid choice\n");
            }
        }
    }

    // takes *handled* menu choice and calls proper algorithm
    private static void executeFunction(int menuChoice) {
        String user_input;
        boolean success = false;
        startTime = System.currentTimeMillis();
        switch(menuChoice) {
            case 1:
                while(!success) {
                    System.out.print("Enter a number to be factorized: ");
                    user_input = getInput();
                    try {
                        MathUtil.printFactors(Integer.parseInt(user_input));
                        success = true;
                    } catch(NumberFormatException e) {
                        System.out.println("Error: \"" + user_input + "\" is not a valid number");
                    }
                }
                break;
            default:
                System.out.println("Error: invalid choice");
                break;
        }
        endTime = System.currentTimeMillis();
        System.out.println("Ran in " + (endTime - startTime) + "ms\n");
    }
}
